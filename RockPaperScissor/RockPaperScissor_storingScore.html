<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Rock Paper Scissor Game</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <h1>Rock Paper Scissor Game</h1>
    <button
      onclick="
    let compChose = getCompChoise();
    matchResult = getResult('Rock ü™®', compChose);
    showResult('Rock ü™®', compChose, matchResult);
    ">
      Rock ü™®
    </button>

    <button
      onclick="
    compChose = getCompChoise();
    matchResult = getResult('Paper üßª', compChose);
    showResult('Paper üßª', compChose, matchResult);
    ">
      Paper üßª
    </button>

    <button
      onclick="
    compChose = getCompChoise();
    matchResult = getResult('Scissor ‚úÇÔ∏è', compChose);
    showResult('Scissor ‚úÇÔ∏è', compChose, matchResult);
    ">
      Scissor ‚úÇÔ∏è
    </button>

    <button
      id="reset"
      onclick="localStorage.clear()
    resetScore(); // set all values to zero
    ">
      Reset üõë
    </button>

    <div class="score-board">
      <h3 id="score"></h3>
      <h3 id="user-move"></h3>
      <h3 id="system-move"></h3>
      <h3 id="result"></h3>
    </div>

    <script>
      let scoreStr = localStorage.getItem("Score"); // taking out data from localStorage
      let score;
      resetScore(scoreStr);

      function resetScore(scoreStr) {
        score = scoreStr
          ? JSON.parse(scoreStr)
          : {
              // if localStorage has no data then we it will set all to 0
              win: 0,
              lost: 0,
              tie: 0,
            };
        score.displayResult = function () {
          return `User won: ${score.win} \xa0\xa0|\xa0\xa0 User lost: ${score.lost} \xa0\xa0|\xa0\xa0 Tie: ${score.tie}`;
        };
        showResult();
      }

      function getCompChoise() {
        let compChoice = Math.random() * 3;
        let compChose;

        if (compChoice <= 1) {
          compChose = "Rock ü™®";
        } else if (compChoice > 1 && compChoice <= 2) {
          compChose = "Paper üßª";
        } else {
          compChose = "Scissor ‚úÇÔ∏è";
        }

        return compChose;
      }

      function getResult(userMove, compMove) {
        let matchResult;

        if (userMove === compMove) {
          score.tie++;
          return "It's a tie!";
        } else if (userMove === "Paper üßª" && compMove === "Rock ü™®") {
          score.win++;
          return "You won!";
        } else if (userMove === "Rock ü™®" && compMove === "Scissor ‚úÇÔ∏è") {
          score.win++;
          return "You won!";
        } else if (userMove === "Scissor ‚úÇÔ∏è" && compMove === "Paper üßª") {
          score.win++;
          return "You won!";
        } else {
          score.lost++;
          return "System Won!";
        }
      }

      function showResult(userMove, compMove, matchResult) {
        localStorage.setItem("Score", JSON.stringify(score)); // storing into the localStorage

        document.querySelector("#score").innerText = score.displayResult();

        document.querySelector("#user-move").innerText = userMove
          ? `You chose ${userMove}`
          : "";

        document.querySelector("#system-move").innerText = compMove
          ? `System chose ${compMove}`
          : "";

        document.querySelector("#result").innerText = matchResult || "";
      }
    </script>
  </body>
</html>
